(()=>{var e={};e.id=1,e.ids=[1],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},132:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var a=s(482),r=s(9108),n=s(2563),i=s.n(n),d=s(8300),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o=["",{children:["dashboard",{children:["reports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8020)),"C:\\Users\\phinn\\OneDrive\\Desktop\\appfinal\\app\\dashboard\\reports\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5030)),"C:\\Users\\phinn\\OneDrive\\Desktop\\appfinal\\app\\dashboard\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2360)),"C:\\Users\\phinn\\OneDrive\\Desktop\\appfinal\\app\\dashboard\\not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5560)),"C:\\Users\\phinn\\OneDrive\\Desktop\\appfinal\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,1429)),"C:\\Users\\phinn\\OneDrive\\Desktop\\appfinal\\app\\not-found.tsx"]}],c=["C:\\Users\\phinn\\OneDrive\\Desktop\\appfinal\\app\\dashboard\\reports\\page.tsx"],m="/dashboard/reports/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/reports/page",pathname:"/dashboard/reports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7338:(e,t,s)=>{Promise.resolve().then(s.bind(s,2192))},2192:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(5344),r=s(3729),n=s(2456),i=s(637);let d=(e,t)=>{let s=["Tax Type,Tax Name,Amount (₹),Date of Payment,Status,Notes",...e.map(e=>[e.tax_type,e.tax_name,e.amount.toString(),new Date(e.date_of_payment).toLocaleDateString(),e.status,e.notes||""]).map(e=>e.join(","))].join("\n"),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(a),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`${t}.csv`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},l=(e,t)=>{let s=JSON.stringify(e.map(e=>({tax_type:e.tax_type,tax_name:e.tax_name,amount:e.amount,date_of_payment:e.date_of_payment,status:e.status,notes:e.notes||""})),null,2),a=new Blob([s],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`${t}.json`),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},o=(e,t)=>{let s=["Tax Type".padEnd(15),"Tax Name".padEnd(25),"Amount (₹)".padEnd(15),"Date".padEnd(15),"Status".padEnd(10),"Notes"].join(" | "),a="-".repeat(s.length),r=[s,a,...e.map(e=>[e.tax_type.padEnd(15),e.tax_name.padEnd(25),e.amount.toString().padEnd(15),new Date(e.date_of_payment).toLocaleDateString().padEnd(15),e.status.padEnd(10),e.notes||""].join(" | "))].join("\n"),n=new Blob([r],{type:"text/plain"}),i=URL.createObjectURL(n),d=document.createElement("a");d.setAttribute("href",i),d.setAttribute("download",`${t}.txt`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)};function c(){let[e,t]=(0,r.useState)(!0),[s,c]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[p,g]=(0,r.useState)(0),[b,f]=(0,r.useState)(0),[j,y]=(0,r.useState)(0),[v,N]=(0,r.useState)(0),[w,_]=(0,r.useState)(0),[D,C]=(0,r.useState)([]),[S,k]=(0,r.useState)(""),[M,T]=(0,r.useState)(""),[I,E]=(0,r.useState)("csv"),P=(0,i.AY)("https://mxuczdeyrczekcyvcshp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14dWN6ZGV5cmN6ZWtjeXZjc2hwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI4MDUxMTEsImV4cCI6MjA1ODM4MTExMX0.h6wT_HPziCAwPhpOa2hs0MQF9ND76wpCleU-yjLyxSA");(0,r.useEffect)(()=>{(async()=>{t(!0);try{let{data:{session:e}}=await P.auth.getSession();if(!e)return;let{data:t,error:s}=await P.from("tax_records").select("*").eq("user_id",e.user.id).order("date_of_payment",{ascending:!1});if(s)throw s;let a=t||[];c(a);let r=a.filter(e=>"Direct"===e.tax_type),n=a.filter(e=>"Indirect"===e.tax_type);x(r),h(n);let i=a.reduce((e,t)=>e+Number(t.amount),0);g(i);let d=r.reduce((e,t)=>e+Number(t.amount),0);f(d),y(i-d);let l=a.reduce((e,t)=>"Paid"===t.status?e+Number(t.amount):e,0);N(l),_(i-l);let o=new Date().getFullYear(),m=Array(12).fill(0).map((e,t)=>{let s=a.filter(e=>{let s=new Date(e.date_of_payment);return s.getFullYear()===o&&s.getMonth()===t});return{month:new Date(o,t).toLocaleString("default",{month:"short"}),amount:s.reduce((e,t)=>e+Number(t.amount),0),count:s.length}});C(m)}catch(e){console.error("Error fetching data:",e)}finally{t(!1)}})()},[]);let q=e=>{let t=new Date;t.setMonth(t.getMonth()-e);let a=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0),n=t.toLocaleString("default",{month:"long"}),i=t.getFullYear();d(s.filter(e=>{let t=new Date(e.date_of_payment);return t>=a&&t<=r}),`${n}_${i}_Tax_Report`)},A=e=>{let t=[],a="";"Direct"===e?(t=m,a="Direct_Tax_Report"):"Indirect"===e?(t=u,a="Indirect_Tax_Report"):(t=s,a="Annual_Tax_Summary"),d(t,a)};return e?a.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):(0,a.jsxs)("div",{className:"animate-fade-in",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tax Reports"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and download tax reports"})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 mb-8",children:[(0,a.jsxs)("div",{className:"dashboard-card bg-white overflow-hidden",children:[a.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Monthly Reports"})})}),(0,a.jsxs)("div",{className:"p-5",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Download monthly tax reports for your records"}),(0,a.jsxs)("div",{className:"space-y-3",children:[[void 0,void 0,void 0].map((e,t)=>{let s=new Date;s.setMonth(s.getMonth()-t);let r=s.toLocaleString("default",{month:"long"}),i=s.getFullYear();return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 rounded-md bg-indigo-100 mr-3",children:a.jsx(n.vlc,{className:"h-5 w-5 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-800",children:[r," ",i]}),a.jsx("p",{className:"text-xs text-gray-500",children:"All tax records"})]})]}),(0,a.jsxs)("button",{className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",onClick:()=>q(t),children:[a.jsx(n._hL,{className:"mr-1 h-4 w-4"})," Download"]})]},t)}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium mt-2",children:"View all monthly reports"})]})]})]}),(0,a.jsxs)("div",{className:"dashboard-card bg-white overflow-hidden",children:[a.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tax Type Reports"})})}),(0,a.jsxs)("div",{className:"p-5",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Download reports by tax type"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 rounded-md bg-blue-100 mr-3",children:a.jsx(n.CFv,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:"Direct Tax Report"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[m.length," records"]})]})]}),(0,a.jsxs)("button",{className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",onClick:()=>A("Direct"),children:[a.jsx(n._hL,{className:"mr-1 h-4 w-4"})," Download"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 rounded-md bg-green-100 mr-3",children:a.jsx(n.NOg,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:"Indirect Tax Report"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[u.length," records"]})]})]}),(0,a.jsxs)("button",{className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",onClick:()=>A("Indirect"),children:[a.jsx(n._hL,{className:"mr-1 h-4 w-4"})," Download"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 rounded-md bg-amber-100 mr-3",children:a.jsx(n.orK,{className:"h-5 w-5 text-amber-600"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:"Annual Summary"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Complete tax summary"})]})]}),(0,a.jsxs)("button",{className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",onClick:()=>A("All"),children:[a.jsx(n._hL,{className:"mr-1 h-4 w-4"})," Download"]})]})]})]})]}),(0,a.jsxs)("div",{className:"dashboard-card bg-white overflow-hidden",children:[a.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Export Options"})})}),(0,a.jsxs)("div",{className:"p-5",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Choose a format to export your data"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{className:`w-full flex items-center justify-between p-3 border ${"csv"===I?"border-indigo-300 bg-indigo-50":"border-gray-200"} rounded-lg hover:bg-gray-50`,onClick:()=>E("csv"),children:[a.jsx("span",{className:"font-medium",children:"CSV (.csv)"}),a.jsx(n._hL,{className:"h-4 w-4 text-gray-500"})]}),(0,a.jsxs)("button",{className:`w-full flex items-center justify-between p-3 border ${"json"===I?"border-indigo-300 bg-indigo-50":"border-gray-200"} rounded-lg hover:bg-gray-50`,onClick:()=>E("json"),children:[a.jsx("span",{className:"font-medium",children:"JSON (.json)"}),a.jsx(n._hL,{className:"h-4 w-4 text-gray-500"})]}),(0,a.jsxs)("button",{className:`w-full flex items-center justify-between p-3 border ${"txt"===I?"border-indigo-300 bg-indigo-50":"border-gray-200"} rounded-lg hover:bg-gray-50`,onClick:()=>E("txt"),children:[a.jsx("span",{className:"font-medium",children:"Text (.txt)"}),a.jsx(n._hL,{className:"h-4 w-4 text-gray-500"})]})]}),(0,a.jsxs)("div",{className:"mt-5",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Date Range"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:S,onChange:e=>k(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"End Date"}),a.jsx("input",{type:"date",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:M,onChange:e=>T(e.target.value)})]})]}),a.jsx("button",{className:"mt-3 w-full btn-gradient py-2 px-4 border-0 rounded-md shadow-sm text-sm font-medium text-white",onClick:()=>{if(!S||!M){alert("Please select both start and end dates.");return}let e=new Date(S),t=new Date(M);if(e>t){alert("Start date must be before end date.");return}let a=s.filter(s=>{let a=new Date(s.date_of_payment);return a>=e&&a<=t}),r=`Tax_Report_${S}_to_${M}`;"csv"===I?d(a,r):"json"===I?l(a,r):o(a,r)},children:"Generate Custom Report"})]})]})]})]}),(0,a.jsxs)("div",{className:"dashboard-card bg-white overflow-hidden mb-8",children:[a.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tax Summary Chart"}),(0,a.jsxs)("button",{className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium flex items-center",onClick:()=>{d(D.map(e=>({month:e.month,amount:e.amount,count:e.count,tax_type:"Monthly Summary",tax_name:`${e.month} Summary`,date_of_payment:new Date().toISOString(),status:"Summary",notes:"Chart export data"})),"Tax_Distribution_Chart"),alert("Chart data exported as CSV. In a complete implementation, this would export the actual chart image.")},children:[a.jsx(n._hL,{className:"mr-1 h-4 w-4"})," Export Chart"]})]})}),a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"md:w-1/2",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Monthly Tax Distribution"}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsx("div",{className:"text-center p-4",children:a.jsx("div",{className:"flex flex-col space-y-2",children:D.slice(0,6).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-16 text-xs text-gray-500",children:e.month}),a.jsx("div",{className:"relative h-5 w-full bg-gray-200 rounded",children:a.jsx("div",{className:"absolute top-0 left-0 h-5 bg-indigo-500 rounded",style:{width:`${e.amount/(Math.max(...D.map(e=>e.amount))||1)*100}%`}})}),(0,a.jsxs)("div",{className:"w-20 text-xs text-gray-500",children:["₹",e.amount.toFixed(2)]})]},t))})})})]}),(0,a.jsxs)("div",{className:"md:w-1/2",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tax Type Distribution"}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsx("div",{className:"text-center p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"w-40 h-40 rounded-full border-8 border-indigo-500 relative mb-4",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full border-8 border-green-500",style:{clipPath:p>0?`polygon(50% 50%, 50% 0%, ${50+50*Math.cos(b/p*2*Math.PI)}% ${50-50*Math.sin(b/p*2*Math.PI)}%, 100% 0%, 100% 100%, 0% 100%, 0% 0%)`:"none"}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:["Total: ₹",p.toFixed(2)]})})]}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full mr-2"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Direct: ₹",b.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Indirect: ₹",j.toFixed(2)]})]})]})]})})})]})]})})]})]})}function m(){return a.jsx(c,{})}},8020:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`C:\Users\phinn\OneDrive\Desktop\appfinal\app\dashboard\reports\page.tsx`),{__esModule:r,$$typeof:n}=a,i=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[844,320,174],()=>s(132));module.exports=a})();