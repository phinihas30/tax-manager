(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1],{4789:function(e,t,s){Promise.resolve().then(s.bind(s,4383))},4383:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(3827),r=s(4090),n=s(6173),l=s(3807);let i=(e,t)=>{let s=["Tax Type,Tax Name,Amount (₹),Date of Payment,Status,Notes",...e.map(e=>[e.tax_type,e.tax_name,e.amount.toString(),new Date(e.date_of_payment).toLocaleDateString(),e.status,e.notes||""]).map(e=>e.join(","))].join("\n"),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(a),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download","".concat(t,".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},d=(e,t)=>{let s=JSON.stringify(e.map(e=>({tax_type:e.tax_type,tax_name:e.tax_name,amount:e.amount,date_of_payment:e.date_of_payment,status:e.status,notes:e.notes||""})),null,2),a=new Blob([s],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download","".concat(t,".json")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},o=(e,t)=>{let s=["Tax Type".padEnd(15),"Tax Name".padEnd(25),"Amount (₹)".padEnd(15),"Date".padEnd(15),"Status".padEnd(10),"Notes"].join(" | "),a="-".repeat(s.length),r=[s,a,...e.map(e=>[e.tax_type.padEnd(15),e.tax_name.padEnd(25),e.amount.toString().padEnd(15),new Date(e.date_of_payment).toLocaleDateString().padEnd(15),e.status.padEnd(10),e.notes||""].join(" | "))].join("\n"),n=new Blob([r],{type:"text/plain"}),l=URL.createObjectURL(n),i=document.createElement("a");i.setAttribute("href",l),i.setAttribute("download","".concat(t,".txt")),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)};function c(){let[e,t]=(0,r.useState)(!0),[s,c]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[b,g]=(0,r.useState)(0),[f,p]=(0,r.useState)(0),[y,j]=(0,r.useState)(0),[v,N]=(0,r.useState)(0),[w,_]=(0,r.useState)(0),[O,S]=(0,r.useState)([]),[D,C]=(0,r.useState)(""),[E,I]=(0,r.useState)(""),[T,k]=(0,r.useState)("csv"),P=(0,l.AY)("https://mxuczdeyrczekcyvcshp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14dWN6ZGV5cmN6ZWtjeXZjc2hwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI4MDUxMTEsImV4cCI6MjA1ODM4MTExMX0.h6wT_HPziCAwPhpOa2hs0MQF9ND76wpCleU-yjLyxSA");(0,r.useEffect)(()=>{(async()=>{t(!0);try{let{data:{session:e}}=await P.auth.getSession();if(!e)return;let{data:t,error:s}=await P.from("tax_records").select("*").eq("user_id",e.user.id).order("date_of_payment",{ascending:!1});if(s)throw s;let a=t||[];c(a);let r=a.filter(e=>"Direct"===e.tax_type),n=a.filter(e=>"Indirect"===e.tax_type);x(r),h(n);let l=a.reduce((e,t)=>e+Number(t.amount),0);g(l);let i=r.reduce((e,t)=>e+Number(t.amount),0);p(i),j(l-i);let d=a.reduce((e,t)=>"Paid"===t.status?e+Number(t.amount):e,0);N(d),_(l-d);let o=new Date().getFullYear(),m=Array(12).fill(0).map((e,t)=>{let s=a.filter(e=>{let s=new Date(e.date_of_payment);return s.getFullYear()===o&&s.getMonth()===t});return{month:new Date(o,t).toLocaleString("default",{month:"short"}),amount:s.reduce((e,t)=>e+Number(t.amount),0),count:s.length}});S(m)}catch(e){console.error("Error fetching data:",e)}finally{t(!1)}})()},[]);let M=e=>{let t=new Date;t.setMonth(t.getMonth()-e);let a=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0),n=t.toLocaleString("default",{month:"long"}),l=t.getFullYear();i(s.filter(e=>{let t=new Date(e.date_of_payment);return t>=a&&t<=r}),"".concat(n,"_").concat(l,"_Tax_Report"))},L=e=>{let t=[],a="";"Direct"===e?(t=m,a="Direct_Tax_Report"):"Indirect"===e?(t=u,a="Indirect_Tax_Report"):(t=s,a="Annual_Tax_Summary"),i(t,a)};return e?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[60vh]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):(0,a.jsxs)("div",{className:"animate-fade-in",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tax Reports"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Generate and download tax reports"})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 mb-8",children:[(0,a.jsxs)("div",{className:"dashboard-card bg-white overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Monthly Reports"})})}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Download monthly tax reports for your records"}),(0,a.jsxs)("div",{className:"space-y-3",children:[[void 0,void 0,void 0].map((e,t)=>{let s=new Date;s.setMonth(s.getMonth()-t);let r=s.toLocaleString("default",{month:"long"}),l=s.getFullYear();return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-indigo-100 mr-3",children:(0,a.jsx)(n.vlc,{className:"h-5 w-5 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-800",children:[r," ",l]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"All tax records"})]})]}),(0,a.jsxs)("button",{className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",onClick:()=>M(t),children:[(0,a.jsx)(n._hL,{className:"mr-1 h-4 w-4"})," Download"]})]},t)}),(0,a.jsx)("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium mt-2",children:"View all monthly reports"})]})]})]}),(0,a.jsxs)("div",{className:"dashboard-card bg-white overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Tax Type Reports"})})}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Download reports by tax type"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-blue-100 mr-3",children:(0,a.jsx)(n.CFv,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"Direct Tax Report"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[m.length," records"]})]})]}),(0,a.jsxs)("button",{className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",onClick:()=>L("Direct"),children:[(0,a.jsx)(n._hL,{className:"mr-1 h-4 w-4"})," Download"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-green-100 mr-3",children:(0,a.jsx)(n.NOg,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"Indirect Tax Report"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[u.length," records"]})]})]}),(0,a.jsxs)("button",{className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",onClick:()=>L("Indirect"),children:[(0,a.jsx)(n._hL,{className:"mr-1 h-4 w-4"})," Download"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-md bg-amber-100 mr-3",children:(0,a.jsx)(n.orK,{className:"h-5 w-5 text-amber-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"Annual Summary"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Complete tax summary"})]})]}),(0,a.jsxs)("button",{className:"flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",onClick:()=>L("All"),children:[(0,a.jsx)(n._hL,{className:"mr-1 h-4 w-4"})," Download"]})]})]})]})]}),(0,a.jsxs)("div",{className:"dashboard-card bg-white overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Export Options"})})}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Choose a format to export your data"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-3 border ".concat("csv"===T?"border-indigo-300 bg-indigo-50":"border-gray-200"," rounded-lg hover:bg-gray-50"),onClick:()=>k("csv"),children:[(0,a.jsx)("span",{className:"font-medium",children:"CSV (.csv)"}),(0,a.jsx)(n._hL,{className:"h-4 w-4 text-gray-500"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-3 border ".concat("json"===T?"border-indigo-300 bg-indigo-50":"border-gray-200"," rounded-lg hover:bg-gray-50"),onClick:()=>k("json"),children:[(0,a.jsx)("span",{className:"font-medium",children:"JSON (.json)"}),(0,a.jsx)(n._hL,{className:"h-4 w-4 text-gray-500"})]}),(0,a.jsxs)("button",{className:"w-full flex items-center justify-between p-3 border ".concat("txt"===T?"border-indigo-300 bg-indigo-50":"border-gray-200"," rounded-lg hover:bg-gray-50"),onClick:()=>k("txt"),children:[(0,a.jsx)("span",{className:"font-medium",children:"Text (.txt)"}),(0,a.jsx)(n._hL,{className:"h-4 w-4 text-gray-500"})]})]}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Date Range"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Date"}),(0,a.jsx)("input",{type:"date",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:D,onChange:e=>C(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"End Date"}),(0,a.jsx)("input",{type:"date",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:E,onChange:e=>I(e.target.value)})]})]}),(0,a.jsx)("button",{className:"mt-3 w-full btn-gradient py-2 px-4 border-0 rounded-md shadow-sm text-sm font-medium text-white",onClick:()=>{if(!D||!E){alert("Please select both start and end dates.");return}let e=new Date(D),t=new Date(E);if(e>t){alert("Start date must be before end date.");return}let a=s.filter(s=>{let a=new Date(s.date_of_payment);return a>=e&&a<=t}),r="Tax_Report_".concat(D,"_to_").concat(E);"csv"===T?i(a,r):"json"===T?d(a,r):o(a,r)},children:"Generate Custom Report"})]})]})]})]}),(0,a.jsxs)("div",{className:"dashboard-card bg-white overflow-hidden mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Tax Summary Chart"}),(0,a.jsxs)("button",{className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium flex items-center",onClick:()=>{i(O.map(e=>({month:e.month,amount:e.amount,count:e.count,tax_type:"Monthly Summary",tax_name:"".concat(e.month," Summary"),date_of_payment:new Date().toISOString(),status:"Summary",notes:"Chart export data"})),"Tax_Distribution_Chart"),alert("Chart data exported as CSV. In a complete implementation, this would export the actual chart image.")},children:[(0,a.jsx)(n._hL,{className:"mr-1 h-4 w-4"})," Export Chart"]})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsxs)("div",{className:"md:w-1/2",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Monthly Tax Distribution"}),(0,a.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center p-4",children:(0,a.jsx)("div",{className:"flex flex-col space-y-2",children:O.slice(0,6).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-16 text-xs text-gray-500",children:e.month}),(0,a.jsx)("div",{className:"relative h-5 w-full bg-gray-200 rounded",children:(0,a.jsx)("div",{className:"absolute top-0 left-0 h-5 bg-indigo-500 rounded",style:{width:"".concat(e.amount/(Math.max(...O.map(e=>e.amount))||1)*100,"%")}})}),(0,a.jsxs)("div",{className:"w-20 text-xs text-gray-500",children:["₹",e.amount.toFixed(2)]})]},t))})})})]}),(0,a.jsxs)("div",{className:"md:w-1/2",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tax Type Distribution"}),(0,a.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center p-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"w-40 h-40 rounded-full border-8 border-indigo-500 relative mb-4",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full rounded-full border-8 border-green-500",style:{clipPath:b>0?"polygon(50% 50%, 50% 0%, ".concat(50+50*Math.cos(f/b*2*Math.PI),"% ").concat(50-50*Math.sin(f/b*2*Math.PI),"%, 100% 0%, 100% 100%, 0% 100%, 0% 0%)"):"none"}}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:["Total: ₹",b.toFixed(2)]})})]}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full mr-2"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Direct: ₹",f.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Indirect: ₹",y.toFixed(2)]})]})]})]})})})]})]})})]})]})}function m(){return(0,a.jsx)(c,{})}},158:function(e,t,s){"use strict";s.d(t,{w_:function(){return c}});var a=s(4090),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(r),l=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach(function(t){var a,r;a=t,r=s[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function c(e){return t=>a.createElement(m,i({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,s)=>a.createElement(t.tag,o({key:s},t.attr),e(t.child)))}(e.child))}function m(e){var t=t=>{var s,{attr:r,size:n,title:d}=e,c=function(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(e,l),m=n||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:s,style:o(o({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),d&&a.createElement("title",null,d),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>t(e)):t(r)}}},function(e){e.O(0,[956,807,971,69,744],function(){return e(e.s=4789)}),_N_E=e.O()}]);